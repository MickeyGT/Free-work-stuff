#include <fstream>
#include <string.h>
#include<ctype.h>
#include<algorithm>
#include<map>
#include<set>
using namespace std;
int n, i, j, nr, k,type;
char c;
char s[7], v[500],rasp[500];
 
int main()
{
    ifstream f("zimeria.in");
    ofstream g("zimeria.out");
    f >> type;
    if (type == 2)
    {
        map <string, unsigned short>st;
        map <string, unsigned short>::iterator it;
        f >> n;
        for (i = 1; i <= 12; i++)
        {
            f >> c;
            v[c] = i + 'a' - 1;
            rasp[i + 'a' - 1] = c;
        }
        for (i = 1; i <= n; i++)
        {
            for (j = 1; j <= 5; j++)
            {
                f >> c;
                s[j - 1] = v[c];
            }
            st[s]++;
        }
        for (it = st.begin(); it != st.end(); it++)
        {
            string str;
            str = it->first;
            for (j = 1; j <= it->second; j++)
            {
                for (i = 0; i <= 4; i++)
                    g << rasp[str[i]];
                g << '\n';
            }
        }
         
    }
    else
    {
        f >> n;
        set<string>map;
        f >> v;
        for (i = 1; i <= n; i++)
        {
            f >> s;
            map.insert(s);
        }
        g << map.size();
    }
    return 0;
}
