#include <iostream>
#include <fstream>
#include <conio.h>
#include <stdlib.h>
#include <string.h>
#include <list>
#include <bitset>
#include <vector>
char l[3][256];
using namespace std;
void f(char l[3][255], int s)
{
	int i = 2, j, k, b = 0, a = 0, v[42], f[42], c = 0, d, e = 1;
	char m[42][10], x[8], q[4][99] = { "Numar invalid","Numarul este:","011101011","011000000" };
	memset(m, '0', sizeof(m));
	while (i <= strlen(l[1]))
	{
		for (j = 0;j < 3;j++)
			l[j][i - 1] == '_' ? m[b][j + 3] = '1' : 0, l[j][i] == '|' ? m[b][j] = '1' : 0, l[j][i - 2] == '|' ? m[b][j + 6] = '1' : 0;
		i += 5;
		m[b][9] = '\0';
		!strcmp("011111011", m[b])? 
			v[b] = 8:
			!strcmp(q[2], m[b])?
				v[b] = 0:
				!strcmp("011111010", m[b])?
					v[b] = 9:
					!strcmp("001111011", m[b])?
						v[b] = 6:
						!strcmp("011111000", m[b])?
							v[b] = 3:
						    !strcmp("001111010", m[b])?
								v[b] = 5:
								!strcmp("011010010", m[b])?
									v[b] = 4:
									!strcmp("011100000", m[b])?
										v[b] = 7:
										!strcmp("010111001", m[b])?
											v[b] = 2:
											!strcmp(q[3], m[b])?
												v[b] = 1: (v[b] = 10, a++, d = b);										
		b++;
	}

	if (a > 1)
		cout << q[0];
	else if (a)
	{
		for (i = 0;i < b;i++)
			v[i] != 10 ? s -= v[i] : 0;
		s ? strcpy(x, q[3]) : strcpy(x, q[2]);

		a = 0;
		for (i = 0;i < 7;i++)
			m[d][i] != x[i] ? a++:0;
		if (a < 2)
		{
			v[d] = s;
			cout << q[1];
			for (i = 0;i < b;i++)
				cout << v[i];
		}
		else
			cout << q[0];;
	}
	else
	{
		f[0] = f[5] = 0;
		for (i = 0;i < b;i++)
			s -= v[i],
			f[v[i]]++;
		!s ? c = 1 : 0;
		s == 8 ? f[0] ? c = 1 : 0 : 0;
		s == 1 || s == 4 ? f[5] ? c = 1 : 0 : 0;

		if (c)
		{
			cout << q[1];
			for (i = 0;i < b;i++)
				s == 4 && v[i] == 5 ? cout << 9 : s == 1 && v[i] == 5 ? cout << 6 : s == 8 && v[i] == 0 ? cout << 8 : cout << v[i];
		}
		else
			cout << "Solutii multiple";

	}

}

int main(int argc, char **argv)
{
	ifstream in("cifre.in");

	char l[3][255];
	in.getline(l[0], 255);
	in.getline(l[1], 255);
	in.getline(l[2], 255);
	f(l, 44);
	system("pause");
	return 0;
}
