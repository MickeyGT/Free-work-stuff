#include <iostream>
#include <fstream>
#include <conio.h>
#include <stdlib.h>
#include <string.h>
#include <list>
#include <bitset>
#include <vector>
char l[3][256];
using namespace std;
void f(char l[3][255], int s)
{
	int i = 2, j, k, nr = 0, nrinvalid = 0, v[42], ok = 1, invind, ind = 1;
	char m[42][8], x[8];
	memset(m, '0', sizeof(m));
	while (i <= strlen(l[1]))
	{
		nr++;
		k = 0;
		for (j = 1;j <= 2;j++)
		{
			if (l[j][i] == '|')
				m[nr][k] = '1';
			k++;
		}
		for (j = 0;j <= 2;j++)
		{

			if (l[j][i - 1] == '_')
				m[nr][k] = '1';
			k++;
		}
		for (j = 1;j <= 2;j++)
		{
			if (l[j][i - 2] == '|')
				m[nr][k] = '1';
			k++;
		}
		i += 5;
	}
	nrinvalid = 0;
	for (i = 1;i <= nr;i++)
	{
		m[i][7] = '\0';
		if (!strcmp("1111111", m[i]))
			v[i] = 8;
		else
			if (!strcmp("1110111", m[i]))
				v[i] = 0;
			else
				if (!strcmp("1111110", m[i]))
					v[i] = 9;
				else
					if (!strcmp("0111111", m[i]))
						v[i] = 6;
					else
						if (!strcmp("1111100", m[i]))
							v[i] = 3;
						else
							if (!strcmp("0111110", m[i]))
								v[i] = 5;
							else
								if (!strcmp("1101010", m[i]))
									v[i] = 4;
								else
									if (!strcmp("1110000", m[i]))
										v[i] = 7;
									else
										if (!strcmp("1011101", m[i]))
											v[i] = 2;
										else
											if (!strcmp("1100000", m[i]))
												v[i] = 1;
											else
											{
												v[i] = 10;
												nrinvalid++;
												invind = i;
											}
	}
	if ((nrinvalid > 1) || (ok == 0))
		cout << "Numar invalid";
	else if (nrinvalid == 1)
	{
		for (i = 1;i <= nr;i++)
			if (v[i] != 10)
				s = s - v[i];
		if (s == 0)
			strcpy(x, "1110111");
		if (s == 1)
			strcpy(x, "1100000");

		nrinvalid = 0;
		for (i = 0;i <= 6;i++)
			if (m[invind][i] != x[i])
				nrinvalid++;
		if (nrinvalid == 1)
		{
			v[invind] = s;
			cout << "Numarul este:";
			for (i = 1;i <= nr;i++)
				cout << v[i];
		}
		else
			cout << "Numar invalid";
	}
	else
	{
		ok = 0;
		for (i = 1;i <= nr;i++)
			s -= v[i];
		memset(m, 0, sizeof(m));
		if (s == 0)
			ok = 1;
		for (i = 1;i <= nr;i++)
			m[v[i]][0]++;
		if (s == 8)
			if (m[0][0] == 1)
				ok = 1;

		if (s == 6)
			if (m[1][0] + m[3][0] == 1)
				ok = 1;

		if ((s == 1) || (s == 4))
			if (m[5][0] == 1)
				ok = 1;


		if (ok == 1)
		{
			cout << "Numarul este:";
			for (i = 1;i <= nr;i++)
					if (s == 4 && v[i] == 5)
						cout << 9;
					else
						if (s == 6 && v[i] == 3)
							cout << 9;
							else
								if (s == 1 && v[i] == 5)
									cout << 6;
								else
									if (s == 8 && v[i] == 0)
										cout << 8;
									else
										cout << v[i];


		}
		else
			cout << "Solutii multiple";
	
	}

}

int main(int argc, char **argv)
{
	ifstream in("cifre.in");

	char l[3][255];
	in.getline(l[0], 255);
	in.getline(l[1], 255);
	in.getline(l[2], 255);
	f(l, 44);
	system("pause");
	return 0;
}
